---
import CartPage from '@/components/cart/CartPage.tsx';
import { getUser } from '@/lib/user';
import { getCart } from '@/lib/cart';

const user = await getUser(Astro.request);
if (!user) return Astro.redirect('/login');

const cartEntries = Object.entries(await getCart(user));
---

<html lang="en">
  <head>
    <title>Your Cart</title>
  </head>
  <body class="bg-background text-foreground">
    <main class="max-w-4xl mx-auto px-4 py-10">
      <h1 class="text-3xl font-bold mb-6">Your Cart</h1>
      <CartPage client:load newCart={cartEntries} />
    </main>
  </body>
</html>
