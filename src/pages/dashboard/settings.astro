---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import { getCurrentUser } from '@/lib/auth-server';
import SettingsManager from '@/components/settings/SettingsManager';

const user = await getCurrentUser(Astro.request);

if (!user) {
  return Astro.redirect('/login');
}
---

<DashboardLayout
  title="Settings"
  breadcrumb={{
    '/settings': 'Settings',
  }}
>
  <div class="space-y-6 p-6">
    <div class="space-y-2">
      <h1 class="text-3xl font-bold tracking-tight">Settings</h1>
      <p class="text-muted-foreground">
        Manage your account settings and preferences
      </p>
    </div>

    <SettingsManager user={JSON.parse(JSON.stringify(user))} client:load />
  </div>
</DashboardLayout>
