---
import '@styles/login.css';
import { Image } from 'astro:assets';
import Icon from '@/components/images/Icon.astro';
import Layout from '@layouts/Layout.astro';
import { SignIn } from 'auth-astro/components';
import { getSession } from 'auth-astro/server';

const session = await getSession(Astro.request);
if (session) {
	return Astro.redirect('/dashboard');
}
---

<Layout title="Login" navbar={false}>
  <div class="container">
    <h1>Welcome Back</h1>
    <div class="login-with-social">
      <SignIn provider="github">
        <Icon
          imagePath={'github'}
          altText={'Github'}
          width={128}
          height={128}
          class="icon"
        />
        Login with Github
      </SignIn>
      <SignIn provider="discord">
        <Icon
          imagePath={'discord'}
          altText={'Discord'}
          width={64}
          height={64}
          class="icon"
        />
        Login with Discord
      </SignIn>
      <SignIn provider="google">
        <Icon
          imagePath={'google'}
          altText={'Google'}
          width={64}
          height={64}
          class="icon"
        />
        Login with Google
      </SignIn>
    </div>
    <p><a href="/"> Back to Home</a></p>
  </div>
</Layout>
